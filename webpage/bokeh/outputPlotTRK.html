



<!DOCTYPE html>
<html lang="en">
  
  <head>
    
      <meta charset="utf-8">
      <title>Bokeh Plot</title>
      
      
        
          
        
        
          
        <script type="text/javascript" src="https://cdn.pydata.org/bokeh/release/bokeh-1.3.4.min.js"></script>
        <script type="text/javascript">
            Bokeh.set_log_level("info");
        </script>
        
      
      
    
  </head>
  
  
  <body>
    
      
        
          
          
            
              <div class="bk-root" id="e8e56584-b3c8-4a68-9e77-8e51e54e542e" data-root-id="1003"></div>
            
          
        
      
      
        <script type="application/json" id="1169">
          {"ab1949f3-03e6-4842-bba7-af1520053c39":{"roots":{"references":[{"attributes":{"base":{"field":"y","units":"data"},"dimension":"width","lower":{"field":"err_x_down","units":"data"},"lower_head":{"id":"1055","type":"TeeHead"},"source":{"id":"1001","type":"ColumnDataSource"},"upper":{"field":"err_x_up","units":"data"},"upper_head":{"id":"1056","type":"TeeHead"}},"id":"1038","type":"Whisker"},{"attributes":{"data_source":{"id":"1001","type":"ColumnDataSource"},"glyph":{"id":"1032","type":"Scatter"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1033","type":"Scatter"},"selection_glyph":null,"view":{"id":"1035","type":"CDSView"}},"id":"1034","type":"GlyphRenderer"},{"attributes":{"active_drag":{"id":"1024","type":"PanTool"},"active_inspect":"auto","active_multi":null,"active_scroll":{"id":"1025","type":"WheelZoomTool"},"active_tap":"auto","tools":[{"id":"1024","type":"PanTool"},{"id":"1025","type":"WheelZoomTool"},{"id":"1026","type":"ResetTool"}]},"id":"1027","type":"Toolbar"},{"attributes":{"callback":null,"data":{"lower1":[],"lower2":[],"lower3":[],"upper1":[],"upper2":[],"upper3":[],"x_m":[],"y_m":[]},"selected":{"id":"1063","type":"Selection"},"selection_policy":{"id":"1064","type":"UnionRenderers"}},"id":"1002","type":"ColumnDataSource"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#1f77b4"},"line_alpha":{"value":0.1},"line_color":{"value":"#1f77b4"},"size":{"units":"screen","value":10},"x":{"field":"x"},"y":{"field":"y"}},"id":"1033","type":"Scatter"},{"attributes":{"base":{"field":"x","units":"data"},"lower":{"field":"err_y_down","units":"data"},"lower_head":{"id":"1053","type":"TeeHead"},"source":{"id":"1001","type":"ColumnDataSource"},"upper":{"field":"err_y_up","units":"data"},"upper_head":{"id":"1054","type":"TeeHead"}},"id":"1036","type":"Whisker"},{"attributes":{"ticker":{"id":"1015","type":"BasicTicker"}},"id":"1018","type":"Grid"},{"attributes":{"source":{"id":"1001","type":"ColumnDataSource"}},"id":"1035","type":"CDSView"},{"attributes":{},"id":"1061","type":"Selection"},{"attributes":{"dimension":1,"ticker":{"id":"1020","type":"BasicTicker"}},"id":"1023","type":"Grid"},{"attributes":{"level":"underlay","size":10},"id":"1055","type":"TeeHead"},{"attributes":{},"id":"1057","type":"BasicTickFormatter"},{"attributes":{},"id":"1062","type":"UnionRenderers"},{"attributes":{"background_fill_color":{"value":"#fafafa"},"below":[{"id":"1014","type":"LinearAxis"}],"center":[{"id":"1018","type":"Grid"},{"id":"1023","type":"Grid"},{"id":"1036","type":"Whisker"},{"id":"1038","type":"Whisker"},{"id":"1045","type":"Band"},{"id":"1047","type":"Band"},{"id":"1049","type":"Band"}],"js_event_callbacks":{"mouseenter":[{"id":"1051","type":"CustomJS"}]},"left":[{"id":"1019","type":"LinearAxis"}],"min_border":10,"min_border_left":50,"renderers":[{"id":"1034","type":"GlyphRenderer"},{"id":"1043","type":"GlyphRenderer"}],"title":{"id":"1004","type":"Title"},"toolbar":{"id":"1027","type":"Toolbar"},"toolbar_location":"above","x_range":{"id":"1006","type":"DataRange1d"},"x_scale":{"id":"1010","type":"LinearScale"},"y_range":{"id":"1008","type":"DataRange1d"},"y_scale":{"id":"1012","type":"LinearScale"}},"id":"1003","subtype":"Figure","type":"Plot"},{"attributes":{"fill_color":{"value":"red"},"line_color":{"value":"red"},"size":{"units":"screen","value":10},"x":{"field":"x"},"y":{"field":"y"}},"id":"1032","type":"Scatter"},{"attributes":{},"id":"1063","type":"Selection"},{"attributes":{},"id":"1059","type":"BasicTickFormatter"},{"attributes":{},"id":"1020","type":"BasicTicker"},{"attributes":{},"id":"1064","type":"UnionRenderers"},{"attributes":{"callback":null,"data":{"err_x_down":[],"err_x_up":[],"err_y_down":[],"err_y_up":[],"x":[],"y":[]},"selected":{"id":"1061","type":"Selection"},"selection_policy":{"id":"1062","type":"UnionRenderers"}},"id":"1001","type":"ColumnDataSource"},{"attributes":{"level":"underlay","size":10},"id":"1054","type":"TeeHead"},{"attributes":{},"id":"1012","type":"LinearScale"},{"attributes":{"callback":null},"id":"1006","type":"DataRange1d"},{"attributes":{"line_alpha":0.6,"line_width":3,"x":{"field":"x_m"},"y":{"field":"y_m"}},"id":"1041","type":"Line"},{"attributes":{"line_alpha":0.1,"line_color":"#1f77b4","line_width":3,"x":{"field":"x_m"},"y":{"field":"y_m"}},"id":"1042","type":"Line"},{"attributes":{"data_source":{"id":"1002","type":"ColumnDataSource"},"glyph":{"id":"1041","type":"Line"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1042","type":"Line"},"selection_glyph":null,"view":{"id":"1044","type":"CDSView"}},"id":"1043","type":"GlyphRenderer"},{"attributes":{},"id":"1015","type":"BasicTicker"},{"attributes":{"text":"Fitted Model"},"id":"1004","type":"Title"},{"attributes":{"level":"underlay","size":10},"id":"1056","type":"TeeHead"},{"attributes":{"source":{"id":"1002","type":"ColumnDataSource"}},"id":"1044","type":"CDSView"},{"attributes":{"base":{"field":"x_m","units":"data"},"fill_alpha":{"value":0.3},"fill_color":{"value":"blue"},"level":"underlay","line_color":{"value":"black"},"line_width":{"value":2},"lower":{"field":"lower1","units":"data"},"source":{"id":"1002","type":"ColumnDataSource"},"upper":{"field":"upper1","units":"data"}},"id":"1045","type":"Band"},{"attributes":{},"id":"1010","type":"LinearScale"},{"attributes":{"callback":null},"id":"1008","type":"DataRange1d"},{"attributes":{"axis_label":"x","formatter":{"id":"1057","type":"BasicTickFormatter"},"ticker":{"id":"1015","type":"BasicTicker"}},"id":"1014","type":"LinearAxis"},{"attributes":{"axis_label":"y","formatter":{"id":"1059","type":"BasicTickFormatter"},"ticker":{"id":"1020","type":"BasicTicker"}},"id":"1019","type":"LinearAxis"},{"attributes":{"base":{"field":"x_m","units":"data"},"fill_alpha":{"value":0.2},"fill_color":{"value":"blue"},"level":"underlay","line_color":{"value":"black"},"line_width":{"value":2},"lower":{"field":"lower2","units":"data"},"source":{"id":"1002","type":"ColumnDataSource"},"upper":{"field":"upper2","units":"data"}},"id":"1047","type":"Band"},{"attributes":{"args":{"p":{"id":"1003","subtype":"Figure","type":"Plot"},"srcData":{"id":"1001","type":"ColumnDataSource"},"srcModel":{"id":"1002","type":"ColumnDataSource"},"xaxis":{"id":"1014","type":"LinearAxis"},"yaxis":{"id":"1019","type":"LinearAxis"}},"code":"\n    p.reset.emit();\n\n    let input_data = getData();\n    let model_plot = getModelData();\n\n    let x_data = input_data[0];\n    let err_x_data = input_data[1];\n    let y_data = input_data[2];\n    let err_y_data = input_data[3];\n\n    let x_m_data = model_plot[0];\n    let y_m_data = model_plot[1];\n    let slop_y = model_plot[2];\n\n    let x = [];\n    let err_x_up = [];\n    let err_x_down = [];\n    let y = []; \n    let err_y_up = [];\n    let err_y_down = [];\n\n    let x_m = [];\n    let y_m = [];\n    let lower1 = [];\n    let lower2 = [];\n    let lower3 = [];\n    let upper1 = [];\n    let upper2 = [];\n    let upper3 = [];\n    \n    var dataData = srcData.data;\n    var dataModel = srcModel.data;\n\n    dataData['x'] = [];\n    dataData['y'] = [];\n    dataData['err_x_up'] = [];\n    dataData['err_y_up'] = [];\n    dataData['err_x_down'] = [];\n    dataData['err_y_down'] = [];\n\n    dataModel['x_m'] = [];\n    dataModel['y_m'] = [];\n    dataModel['lower1'] = [];\n    dataModel['lower2'] = [];\n    dataModel['lower3'] = [];\n    dataModel['upper1'] = [];\n    dataModel['upper2'] = [];\n    dataModel['upper3'] = [];\n\n    x = dataData['x'];\n    y = dataData['y'];\n    err_x_up = dataData['err_x_up']\n    err_y_up = dataData['err_y_up']\n    err_x_down = dataData['err_x_down']\n    err_y_down = dataData['err_y_down']\n    \n    x_m = dataModel['x_m'];\n    y_m = dataModel['y_m'];\n    lower1 = dataModel['lower1'];\n    lower2 = dataModel['lower2'];\n    lower3 = dataModel['lower3'];\n    upper1 = dataModel['upper1'];\n    upper2 = dataModel['upper2'];\n    upper3 = dataModel['upper3'];\n\n    let bands = getBands(y_m_data, slop_y);\n\n    for (let i = 0; i &lt; x_data.length; i++){\n        x[i] = x_data[i];\n        y[i] = y_data[i];\n        err_x_up[i] = x_data[i] + err_x_data[i];\n        err_y_up[i] = y_data[i] + err_y_data[i];\n        err_x_down[i] = x_data[i] - err_x_data[i];\n        err_y_down[i] = y_data[i] - err_y_data[i];\n    }\n\n    for (let i = 0; i &lt; x_m_data.length; i++){\n        x_m[i] = x_m_data[i];\n        y_m[i] = y_m_data[i];\n\n        lower1[i] = bands[0][i];\n        lower2[i] = bands[1][i];\n        lower3[i] = bands[2][i];\n        upper1[i] = bands[3][i];\n        upper2[i] = bands[4][i];\n        upper3[i] = bands[5][i];\n    }\n\n    dataData['x'] = x;\n    dataData['y'] = y;\n    dataData['err_x_up'] = err_x_up;\n    dataData['err_y_up'] = err_y_up;\n    dataData['err_x_down'] = err_x_down;\n    dataData['err_y_down'] = err_y_down;\n\n    dataModel['x_m'] = x_m;\n    dataModel['y_m'] = y_m;\n    dataModel['lower1'] = lower1;\n    dataModel['lower2'] = lower2;\n    dataModel['lower3'] = lower3;\n    dataModel['upper1'] = upper1;\n    dataModel['upper2'] = upper2;\n    dataModel['upper3'] = upper3;\n\n    console.log(lower1)\n    console.log(lower2)\n    console.log(lower3)\n    console.log(upper1)\n    console.log(upper2)\n    console.log(upper3)\n\n    //xaxis.axis_label = playerPlotAxes[0];\n    //yaxis.axis_label = playerPlotAxes[1];\n\n    srcData.change.emit();  \n    srcModel.change.emit(); \n    p.change.emit();\n"},"id":"1051","type":"CustomJS"},{"attributes":{"level":"underlay","size":10},"id":"1053","type":"TeeHead"},{"attributes":{},"id":"1024","type":"PanTool"},{"attributes":{},"id":"1025","type":"WheelZoomTool"},{"attributes":{},"id":"1026","type":"ResetTool"},{"attributes":{"base":{"field":"x_m","units":"data"},"fill_alpha":{"value":0.1},"fill_color":{"value":"blue"},"level":"underlay","line_color":{"value":"black"},"line_width":{"value":2},"lower":{"field":"lower3","units":"data"},"source":{"id":"1002","type":"ColumnDataSource"},"upper":{"field":"upper3","units":"data"}},"id":"1049","type":"Band"}],"root_ids":["1003"]},"title":"Fitted Model","version":"1.3.4"}}
        </script>
        <script type="text/javascript">
          (function() {
            var fn = function() {
              Bokeh.safely(function() {
                (function(root) {
                  function embed_document(root) {
                    
                  var docs_json = document.getElementById('1169').textContent;
                  var render_items = [{"docid":"ab1949f3-03e6-4842-bba7-af1520053c39","roots":{"1003":"e8e56584-b3c8-4a68-9e77-8e51e54e542e"}}];
                  root.Bokeh.embed.embed_items(docs_json, render_items);
                
                  }
                  if (root.Bokeh !== undefined) {
                    embed_document(root);
                  } else {
                    var attempts = 0;
                    var timer = setInterval(function(root) {
                      if (root.Bokeh !== undefined) {
                        embed_document(root);
                        clearInterval(timer);
                      }
                      attempts++;
                      if (attempts > 100) {
                        console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
                        clearInterval(timer);
                      }
                    }, 10, root)
                  }
                })(window);
              });
            };
            if (document.readyState != "loading") fn();
            else document.addEventListener("DOMContentLoaded", fn);
          })();
        </script>
    
  </body>
  
</html>